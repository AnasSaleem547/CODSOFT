1 #include <stdio.h>
2
#include <stdlib.h>
3
#include <string.h>
4 #include <fcntl.h>
5
#include <sys/shm.h>
6
#include <sys/stat.h>
7 #include <sys/mman.h>
8 #include <unistd.h>
9
10
int main() {
11
const int SIZE = 4096;
12
const char *name = "OS";
13
// the size (in bytes) of shared memory object // name of the shared memory object
const char *message_0 = "Hello"; // strings written to shared memory
14
const char *message_1 = "World!";
15
int fd; // shared memory file descriptor
16
char *ptr; // pointer to shared memory obect
17
18
19
20
// memory map the shared memory object
fd = shm_open(name, O_CREAT | O_RDWR, 0666); // create the shared memory object

ftruncate(fd, SIZE); // configure the size of the shared memory object
ptr = (char *) mmap(0, SIZE, PROT_READ|PROT_WRITE, MAP_SHARED, fd, 0); // write to the shared memory object
sprintf(ptr, "%s", message_0);
ptr += strlen(message_0);
sprintf(ptr, "%s", message_1); ptr += strlen(message_1);

return 0;

}
